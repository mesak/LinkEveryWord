# 配置文件說明

## 概述

LinkEveryWord Desktop App 使用 YAML 格式的配置文件 (`config.yml`) 來管理應用程式設定。

## 自動配置創建

應用程式具備智能配置管理功能：

### 🔄 自動創建機制
- **首次啟動**: 如果 `config.yml` 不存在，應用程式會自動創建預設配置文件
- **打包環境**: 在 PyInstaller 打包的 exe 環境中，配置文件會創建在 exe 檔案同目錄
- **開發環境**: 在開發環境中，配置文件會創建在專案目錄

### 🔧 智能合併功能
- **向下兼容**: 如果配置文件缺少某些設定項目，會自動補充預設值
- **保留自定義**: 現有的自定義設定會被保留
- **動態擴展**: 當應用程式新增配置項目時，現有配置會自動擴展

## 配置項目說明

### 服務器設定 (`server`)

```yaml
server:
  # 服務器綁定的 IP 地址
  # 127.0.0.1: 僅本機可訪問 (建議)
  # 0.0.0.0: 允許區域網訪問 (需注意安全性)
  host: '127.0.0.1'
  
  # 服務器監聽端口
  # 可選範圍: 1024-65535 (避免使用系統保留端口)
  port: 5000
  
  # 調試模式
  # true: 開啟詳細錯誤信息和自動重載 (僅開發用)
  # false: 生產模式 (建議)
  debug: false
  
  # 自動重載功能
  # true: 代碼變更時自動重啟 (僅開發用)
  # false: 關閉自動重載 (建議)
  use_reloader: false
```

### 應用程式設定 (`app`)

```yaml
app:
  # 應用程式顯示名稱
  name: 'Everything Flask 搜尋應用程式'
  
  # 瀏覽器自動開啟延遲時間 (秒)
  # 較大的值可確保服務器完全啟動後再開啟瀏覽器
  browser_delay: 2
```

## 使用範例

### 基本配置 (預設)
```yaml
server:
  host: '127.0.0.1'
  port: 5000
  debug: false
  use_reloader: false

app:
  name: 'Everything Flask 搜尋應用程式'
  browser_delay: 2
```

### 開發環境配置
```yaml
server:
  host: '127.0.0.1'
  port: 8080
  debug: true
  use_reloader: true

app:
  name: 'Everything Flask 搜尋應用程式 (開發版)'
  browser_delay: 1
```

### 區域網共享配置
```yaml
server:
  host: '0.0.0.0'    # ⚠️ 注意安全性
  port: 5000
  debug: false
  use_reloader: false

app:
  name: 'Everything Flask 搜尋應用程式 (共享版)'
  browser_delay: 3
```

## 配置文件位置

### 開發環境
- 位置: 專案根目錄 `/desktop-app/config.yml`
- 可直接編輯修改

### 打包後的 exe 環境
- 位置: exe 檔案同目錄 `/config.yml`
- 可在 exe 檔案旁邊手動創建或編輯

## 故障排除

### 配置文件損壞
如果配置文件格式錯誤，應用程式會：
1. 顯示錯誤信息
2. 使用內建預設配置繼續運行
3. 建議檢查 YAML 語法

### 端口衝突
如果指定端口被占用：
1. 修改 `config.yml` 中的 `port` 值
2. 選擇未被使用的端口 (如 5001, 8080, 8888 等)
3. 重新啟動應用程式

### 權限問題
如果無法創建配置文件：
1. 確保應用程式有寫入權限
2. 以管理員身份運行 (Windows)
3. 檢查防毒軟體是否阻擋

## 安全建議

1. **生產環境**: 使用 `host: '127.0.0.1'` 限制本機訪問
2. **調試模式**: 生產環境務必設定 `debug: false`
3. **端口選擇**: 避免使用知名端口 (80, 443, 22 等)
4. **防火牆**: 開放區域網訪問時注意防火牆設定

## 配置更新

應用程式支援配置熱更新：
1. 修改 `config.yml`
2. 重新啟動應用程式
3. 新配置立即生效

舊版本配置會自動升級，無需手動調整。
